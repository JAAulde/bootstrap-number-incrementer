/**
 * @file A jQuery/Boostrap based widget for use on text and number inputs to
 *       turn them into Bootstrap input groups with plus and minus buttons for
 *       incrementing and decrementing the input's numeric value.
 * @version 1.0.0
 * @copyright Jim Auldridge <auldridgej@gmail.com> 2016
 * @license MIT
 * @see {@link https://github.com/JAAulde/bootstrap-number-incrementer|GitHub Repository}
 * @see {@link http://getbootstrap.com/|Bootstrap}
 * @see {@link https://jquery.com/|jQuery}
 */
!function(t){"use strict";var e=t.parseInt,n=t.jQuery,a=t.template_manager,r=n.fn.prop,i=n.fn.attr,s=function(){return s.$||(s.$=n(a.get("partials/wrapper.html"))),s.$.clone()},c=function(t){var e,n,a,r=t.find("input.bs-number-incremented"),i=r.data("widgetData").options;switch(i.width_factor){case"range":e=(r.attr("min")||"").length,n=(r.attr("max")||"").length,a=e>n?e:n,t.width(7+(a||1)+"em");break;case"dynamic":a=(r.val()||"").length||1,t.width(7+a+"em")}},p={width_factor:"range"};n.fn.prop=function(){var t=arguments;return 2===t.length&&"disabled"===t[0]&&this.filter("input.bs-number-incremented").each(function(){var e=n(this);n.fn.prop.apply(e.closest("div.bs-number-incrementer").find("button"),t)}),r.apply(this,t)},n.fn.attr=function(){var t=arguments,e=i.apply(this,t);return 2===t.length&&["min","max"].indexOf(t[0])>-1&&this.filter("input.bs-number-incremented").each(function(){var t=n(this);c(t.closest("div.bs-number-incrementer"))}),e},n.fn.numberIncrementer=function(t){switch(t){case"increment":this.filter("input.bs-number-incremented").each(function(){var t,a,r,i=n(this);i.prop("disabled")||(t=e(i.val(),10),isNaN(t)&&(t=0),a=e(i.attr("min"),10),!isNaN(a)&&a>t?i.val(a).trigger("change"):(r=e(i.attr("max"),10),(isNaN(r)||t<r)&&i.val(t+1).trigger("change")))});break;case"decrement":this.filter("input.bs-number-incremented").each(function(){var t,a,r,i=n(this);i.prop("disabled")||(t=e(i.val(),10),isNaN(t)&&(t=0),a=e(i.attr("max"),10),!isNaN(a)&&t>a?i.val(a).trigger("change"):(r=e(i.attr("min"),10),(isNaN(r)||r<t)&&i.val(t-1).trigger("change")))});break;case"destroy":this.filter("input.bs-number-incremented").each(function(){var t=n(this),e=t.data("widgetData");t.closest("div.bs-number-incrementer").replaceWith(t),t.off("change.bs-number-incrementer").removeClass("bs-number-incremented").attr("type",e.original_type).removeData("widgetData")});break;default:var a=n.extend({},p,t||{});this.filter('input[type="text"], input[type="number"]').not(".bs-number-incremented").each(function(){var t=n(this),e=s(),r={original_type:t.attr("type"),options:a};t.replaceWith(e),e.find("span.bs-number-incremented-target:first").replaceWith(t),t.prop("disabled",t.prop("disabled")).data("widgetData",r).attr("type","text").addClass("bs-number-incremented").on("change.bs-number-incrementer",function(){"dynamic"===t.data("widgetData").options.width_factor&&c(t.closest("div.bs-number-incrementer"))}),c(e),e.find("button[data-operation]").on("click",function(){var e=n(this).data("operation");["increment","decrement"].indexOf(e)>=0&&t.numberIncrementer(e)})})}return this}}(this),function(){template_manager.cache("partials/wrapper.html",'<div class="bs-number-incrementer"><div class="input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" data-operation="decrement"><span class="glyphicon glyphicon-minus"></span></button> </span><span class="bs-number-incremented-target"></span> <span class="input-group-btn"><button type="button" class="btn btn-default" data-operation="increment"><span class="glyphicon glyphicon-plus"></span></button></span></div></div>')}();